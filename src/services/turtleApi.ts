import {delay, getNormalizedPoints} from '../helpers';
import {ApiCall, Point} from '../models';

const RAW_PATH: Point[] = [
  [0.0, 0.0],
  [0.04098072, -0.13828821],
  [0.37039216, -0.23339399],
  [0.26885702, -0.39102624],
  [0.36020683, -0.45064686],
  [-0.01817907, -0.3943288],
  [-0.24411102, -0.19926696],
  [-0.22221142, -0.08177388],
  [-0.14779513, -0.10919445],
  [-0.11249928, -0.03097189],
  [-0.09876267, 0.16555104],
  [-0.35416056, 0.12901593],
  [-0.54815881, -0.11872139],
  [-0.58441766, -0.11658687],
  [-0.45240259, -0.15805184],
  [-0.2306792, -0.30166512],
  [-0.25688306, -0.33089615],
  [-0.21037456, -0.41316224],
  [-0.4104509, -0.07521438],
  [-0.30874718, 0.08525497],
  [0.14363327, 0.51256361],
  [-0.10741609, 0.36332592],
  [-0.25304602, 0.47628111],
  [-0.16213813, 0.15215947],
  [-0.17659667, 0.03539221],
  [-0.14959906, 0.15484942],
  [-0.41021778, 0.14103985],
  [-0.24719203, -0.11903506],
  [-0.38621704, -0.36233742],
  [-0.50019402, -0.34869787],
  [-0.25441915, -0.6297036],
  [-0.18646859, -0.51844084],
  [-0.35842901, -0.92723019],
  [-0.0812252, -0.91910342],
  [-0.29128049, -0.8927227],
  [-0.36505042, -0.89044596],
  [-0.60102474, -0.97307932],
  [-0.84610783, -0.72619362],
  [-0.83735618, -0.28311696],
  [-1.06523353, -0.13486321],
  [-0.91766635, -0.31854616],
  [-1.19567779, -0.34174444],
  [-1.47440949, -0.06164389],
  [-1.04506659, 0.29160647],
  [-0.95275659, 0.36077128],
  [-0.93833974, 0.46227702],
  [-1.00125541, 0.33578797],
  [-0.94485729, 0.2570644],
  [-0.71518176, 0.33342894],
  [-1.29044156, 0.3313786],
  [-1.4369072, 0.61802139],
  [-1.60518817, 0.6845273],
  [-1.34295739, 0.25144649],
  [-1.49914498, 0.33093048],
  [-1.66155677, 0.13395569],
  [-1.6313757, 0.26790416],
  [-1.76197316, 0.27831537],
  [-1.76077967, 0.34911793],
  [-1.88998263, 0.45325695],
  [-2.18844935, 0.32296382],
  [-2.41798411, 0.39045777],
  [-2.45031623, 0.08789025],
  [-2.35356609, 0.32781493],
  [-2.12506546, 0.17085454],
  [-1.8969035, 0.13244893],
  [-1.6901256, 0.30419551],
  [-1.72998913, 0.1491815],
  [-2.05013961, 0.06374831],
  [-1.78242246, -0.2941374],
  [-1.77128215, -0.42580831],
  [-1.47869212, -0.62847553],
  [-1.39653734, -0.73003446],
  [-1.39242118, -0.9754278],
  [-1.49746158, -1.22779624],
  [-1.49688251, -1.3645294],
  [-1.68881407, -1.68628948],
  [-1.85445685, -1.39260927],
  [-1.76975365, -1.3114893],
  [-1.56874687, -1.49265572],
  [-1.31855753, -1.31346287],
  [-1.23724304, -1.2961877],
  [-1.01213979, -1.2579889],
  [-1.14323979, -1.19850868],
  [-1.03035418, -1.32356686],
  [-1.00203337, -1.08256449],
  [-0.64046991, -0.99882581],
  [-0.75544964, -0.98965591],
  [-1.03198571, -0.93446976],
  [-1.08059117, -1.15162865],
  [-1.31519697, -1.32327273],
  [-1.41170459, -1.4097903],
  [-1.76285645, -1.08794539],
  [-1.56616744, -0.7597131],
  [-1.35019649, -1.09360609],
  [-1.13716686, -1.12621389],
  [-0.95180249, -1.17947801],
  [-0.98252708, -1.25376455],
  [-0.56946837, -1.50910832],
  [-0.33607004, -1.63361693],
  [-0.2754238, -1.49252645],
];

const getMockTurtlePath = (mockDelay: number): Point[] => {
  delay(mockDelay);
  return RAW_PATH;
};

const getApiTurtlePath = () => {
  throw Error('Not implemented');
};

const turtleAPI = {
  getTurtlePath: (args: ApiCall): Point[] | never => {
    // In the future, return normalized points
    const {useMock, mockDelay} = args;
    const rawPoints = useMock
      ? getMockTurtlePath(mockDelay)
      : getApiTurtlePath();
    return getNormalizedPoints(rawPoints);
  },
};

export default turtleAPI;
